<h1 id="client-name">Contrats pour  {{ clientName }}</h1>

<div id="contracts-wrapper">
  <table id="contracts-table">
    <thead>
      <tr>
        <th>Type de Contrat</th>
        <th>Service</th>
        <th>Date de Début</th>
        <th>Date de Fin</th>
        <th>Statut</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let contract of contracts">
        <td>{{ contract.contraType }}</td>
        <td>{{ contract.service }}</td>
        <td>{{ contract.beginDate }}</td>
        <td>{{ contract.finDate }}</td>
        <td>{{ contract.status }}</td>
        <td>
          <button class="button-action" (click)="editContract(contract)">Mettre à jour</button>
          <button class="button-action" *ngIf="contract._id" (click)="deleteContract(contract._id!)">Supprimer</button>
        </td>
      </tr>
    </tbody>
  </table>

  <div class="add-button-wrapper">
    <button class="button-add" (click)="toggleAddContractForm()">Ajouter un contrat</button>
  </div>
</div>

<!-- Formulaire pour ajouter ou modifier un contrat -->
<div id="add-contract-form" *ngIf="showAddContractForm" class="form-container">
  <h3 *ngIf="editingContractId">Modifier le contrat</h3>
  <h3 *ngIf="!editingContractId">Ajouter un nouveau contrat</h3>
  <form>
    <label for="contractType">Type de Contrat</label>
    <input type="text" id="contractType" name="contractType" [(ngModel)]="newContract.contraType" required>

    <label for="service">Service</label>
    <input type="text" id="service" name="service" [(ngModel)]="newContract.service" required>

    <label for="startDate">Date de Début</label>
    <input type="date" id="startDate" name="startDate" [(ngModel)]="newContract.beginDate" required>

    <label for="endDate">Date de Fin</label>
    <input type="date" id="endDate" name="endDate" [(ngModel)]="newContract.finDate" required>

    <label for="status">Statut</label>
    <input type="text" id="status" name="status" [(ngModel)]="newContract.status" required>

    <div class="form-buttons">
      <button type="button" class="button-action" (click)="saveContract()">Enregistrer</button>
      <button type="button" class="button-action" (click)="cancel()">Annuler</button>
    </div>
  </form>
</div>

<footer>
  <a [routerLink]="['/clientes']" class="text-sm font-semibold leading-6 text-gray-900">
    <button class="button-back">Retour</button>
  </a>
</footer>
